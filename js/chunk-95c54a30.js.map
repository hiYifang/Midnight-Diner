{"version":3,"sources":["webpack:///./src/views/backend/Products.vue","webpack:///./src/components/backend/ProductModal.vue","webpack:///./src/components/backend/ProductModal.vue?6879","webpack:///./src/views/backend/Products.vue?ec83","webpack:///./node_modules/core-js/modules/es.symbol.description.js"],"names":["class","style","active","isLoading","type","openModal","pages","pagination","getProducts","products","item","is_enabled","key","id","title","category","$filters","currency","origin_price","price","openDelModal","ref","innerProduct","tempProduct","updateProduct","innerItem","delProduct","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","for","src","alt","placeholder","true-value","false-value","value","unit","min","data-bs-toggle","data-bs-target","aria-expanded","descriptionCollapse","contentCollapse","description","content","uploadFile","$emit","props","Object","default","watch","this","data","modal","imageUrl","methods","file","$refs","fileInput","files","beforeId","reader","FileReader","addEventListener","imageLoaded","readAsDataURL","formData","FormData","append","api","$http","post","then","res","success","document","getElementById","e","target","result","mixins","modalMixin","__exports__","components","ProductModal","DelModal","Pagination","inject","isNew","page","get","productModal","showModal","httpMethod","hideModal","$httpMessageState","delModal","delete","created","render","$","DESCRIPTORS","global","uncurryThis","hasOwn","isCallable","isPrototypeOf","toString","defineProperty","f","copyConstructorProperties","NativeSymbol","Symbol","SymbolPrototype","prototype","undefined","EmptyStringDescriptionStore","SymbolWrapper","arguments","length","constructor","NATIVE_SYMBOL","String","symbolToString","symbolValueOf","valueOf","regexp","replace","stringSlice","slice","configurable","symbol","string","desc","forced"],"mappings":"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","file":"js/chunk-95c54a30.js","sourcesContent":["<template>\n  <!-- Loading 效果 -->\n  <Loading :active=\"isLoading\"></Loading>\n  <!-- 按鈕 -->\n  <button\n    type=\"button\"\n    class=\"\n      btn btn-primary\n      rounded-circle\n      position-fixed\n      bottom-0\n      end-0\n      m-3\n    \"\n    @click=\"openModal(true)\"\n  >\n    <i class=\"bi bi-cloud-plus\"></i>\n  </button>\n  <!-- 內容 -->\n  <div class=\"container\">\n    <!-- 分頁 -->\n    <Pagination class=\"mt-3\" :pages=\"pagination\" @emit-pages=\"getProducts\"></Pagination>\n    <!-- 表格 -->\n    <div class=\"table-responsive my-4\">\n      <table\n        class=\"table table-borderless table-hover\"\n        style=\"border-collapse: separate; border-spacing: 0 0.5rem\"\n      >\n        <thead class=\"text-nowrap\">\n          <tr class=\"align-middle text-secondary\">\n            <th>商品名稱</th>\n            <th>類別</th>\n            <th>原價</th>\n            <th>售價</th>\n            <th>啟用狀態</th>\n            <th>編輯</th>\n          </tr>\n        </thead>\n        <tbody class=\"text-nowrap\">\n          <tr\n            class=\"align-middle bg-light shadow-sm\"\n            v-for=\"item in products\"\n            :key=\"item.id\"\n            :class=\"{ 'text-secondary': !item.is_enabled }\"\n          >\n            <td class=\"rounded-start\">{{ item.title }}</td>\n            <td>{{ item.category }}</td>\n            <td class=\"text-right\">\n              {{ $filters.currency(item.origin_price) }}\n            </td>\n            <td class=\"text-right\">{{ $filters.currency(item.price) }}</td>\n            <td>\n              <i class=\"bi bi-check-lg text-primary\" v-if=\"item.is_enabled\"></i>\n              <i class=\"bi bi-x-lg text-danger\" v-else></i>\n            </td>\n            <td class=\"rounded-end\">\n              <div class=\"btn-group\">\n                <button\n                  class=\"btn btn-outline-primary btn-sm\"\n                  @click=\"openModal(false, item)\"\n                >\n                  <i class=\"bi bi-pencil\"></i>\n                </button>\n                <button\n                  class=\"btn btn-outline-danger btn-sm\"\n                  @click=\"openDelModal(item)\"\n                >\n                  <i class=\"bi bi-trash\"></i>\n                </button>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <!-- 透過 ref 存取 DOM 元素，透過 props 傳遞資料 -->\n  <ProductModal\n    ref=\"productModal\"\n    :innerProduct=\"tempProduct\"\n    @update-product=\"updateProduct\"\n  />\n  <DelModal ref=\"delModal\" :innerItem=\"tempProduct\" @del-item=\"delProduct\" />\n</template>\n\n<script>\nimport ProductModal from '@/components/backend/ProductModal.vue';\nimport DelModal from '@/components/backend/DelModal.vue';\nimport Pagination from '@/components/Pagination.vue';\n\nexport default {\n  components: {\n    ProductModal,\n    DelModal,\n    Pagination,\n  },\n  // 使用 mitt 套件\n  inject: ['emitter'],\n  data() {\n    return {\n      // 商品資訊\n      products: [],\n      // 分頁資訊\n      pagination: {},\n      // 新增單一商品資訊\n      tempProduct: {},\n      // 判斷新增或編輯\n      isNew: false,\n      // loading 效果\n      isLoading: false,\n    };\n  },\n  methods: {\n    // 取得商品列表\n    getProducts(page = 1) {\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/products?page=${page}`;\n      this.isLoading = true;\n      this.$http.get(api).then((res) => {\n        this.isLoading = false;\n        if (res.data.success) {\n          this.products = res.data.products;\n          this.pagination = res.data.pagination;\n        }\n      });\n    },\n    // 開啟彈跳視窗，判斷新增或編輯\n    openModal(isNew, item) {\n      if (isNew) {\n        this.tempProduct = {};\n      } else {\n        this.tempProduct = { ...item };\n      }\n      this.isNew = isNew;\n      this.$refs.productModal.showModal();\n    },\n    updateProduct(item) {\n      this.tempProduct = item;\n      // 新增：商品建立\n      let api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product`;\n      let httpMethod = 'post';\n      // 編輯：修改產品\n      if (!this.isNew) {\n        api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`;\n        httpMethod = 'put';\n      }\n      // 傳送商品資料\n      this.$http[httpMethod](api, { data: this.tempProduct }).then((res) => {\n        this.$refs.productModal.hideModal();\n        this.getProducts();\n        // Toasts 訊息 - 推送成功\n        this.$httpMessageState(res, '更新產品');\n      });\n    },\n    // 開啟彈跳視窗，刪除商品\n    openDelModal(item) {\n      this.tempProduct = { ...item };\n      this.$refs.delModal.showModal();\n    },\n    delProduct() {\n      // 刪除：刪除產品\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`;\n      this.$http.delete(api).then((res) => {\n        this.$refs.delModal.hideModal();\n        this.getProducts();\n        this.$httpMessageState(res, '刪除產品');\n      });\n    },\n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n","<template>\n  <!-- 透過 ref 存取 DOM 元素 -->\n  <div\n    class=\"modal fade\"\n    id=\"productModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"productModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content text-primary border-0\">\n        <div class=\"p-3\">\n          <div class=\"d-flex justify-content-end\">\n            <button\n              type=\"button\"\n              class=\"btn-close\"\n              data-bs-dismiss=\"modal\"\n              aria-label=\"Close\"\n            ></button>\n          </div>\n          <div class=\"modal-header justify-content-around align-items-center\">\n            <div class=\"w-30 m-1\">\n              <img\n                class=\"img-thumbnail\"\n                :src=\"\n                  tempProduct.imageUrl\n                    ? tempProduct.imageUrl\n                    : imageUrl\n                    ? imageUrl\n                    : 'https://fakeimg.pl/300/'\n                \"\n                :alt=\"tempProduct.title\"\n              />\n            </div>\n            <div class=\"m-1\">\n              <input\n                type=\"text\"\n                class=\"form-control border-0 border-bottom rounded-0 p-0\"\n                id=\"productModalLabel\"\n                placeholder=\"請輸入商品\"\n                v-model=\"tempProduct.title\"\n              />\n              <p class=\"fs-static-14 text-secondary mb-0\">\n                <i class=\"bi bi-exclamation-diamond\"></i>\n                欄位必填\n              </p>\n            </div>\n            <div class=\"switch-field m-1\">\n              <input\n                class=\"switch\"\n                type=\"checkbox\"\n                :true-value=\"1\"\n                :false-value=\"0\"\n                v-model=\"tempProduct.is_enabled\"\n                id=\"is_enabled\"\n              />\n              <label for=\"is_enabled\"></label>\n            </div>\n          </div>\n          <div class=\"modal-body\">\n            <!-- 分類、單位 -->\n            <div class=\"row g-2\">\n              <div class=\"col-md mb-3\">\n                <div class=\"form-floating\">\n                  <select\n                    class=\"form-select\"\n                    id=\"category\"\n                    v-model=\"tempProduct.category\"\n                  >\n                    <option\n                      :value=\"item\"\n                      v-for=\"(item, key) in category\"\n                      :key=\"key\"\n                    >\n                      {{ item }}\n                    </option>\n                  </select>\n                  <label for=\"category\">\n                    <i\n                      class=\"\n                        bi bi-exclamation-diamond\n                        fs-static-14\n                        text-secondary\n                      \"\n                    ></i>\n                    請選擇分類\n                  </label>\n                </div>\n              </div>\n              <div class=\"col-md mb-3\">\n                <div class=\"form-floating\">\n                  <select\n                    class=\"form-select\"\n                    id=\"unit\"\n                    v-model=\"tempProduct.unit\"\n                  >\n                    <option\n                      :value=\"item\"\n                      v-for=\"(item, key) in unit\"\n                      :key=\"key\"\n                    >\n                      {{ item }}\n                    </option>\n                  </select>\n                  <label for=\"unit\">\n                    <i\n                      class=\"\n                        bi bi-exclamation-diamond\n                        fs-static-14\n                        text-secondary\n                      \"\n                    ></i>\n                    請選擇單位\n                  </label>\n                </div>\n              </div>\n            </div>\n            <!-- 原價、售價 -->\n            <div class=\"row g-2\">\n              <div class=\"col-md mb-3\">\n                <div class=\"form-floating\">\n                  <input\n                    type=\"number\"\n                    class=\"form-control\"\n                    id=\"origin_price\"\n                    v-model.number=\"tempProduct.origin_price\"\n                    min=\"0\"\n                  />\n                  <label for=\"origin_price\">\n                    <i\n                      class=\"\n                        bi bi-exclamation-diamond\n                        fs-static-14\n                        text-secondary\n                      \"\n                    ></i>\n                    請輸入原價\n                  </label>\n                </div>\n              </div>\n              <div class=\"col-md mb-3\">\n                <div class=\"form-floating\">\n                  <input\n                    type=\"number\"\n                    class=\"form-control\"\n                    id=\"price\"\n                    v-model.number=\"tempProduct.price\"\n                    min=\"0\"\n                  />\n                  <label for=\"price\">\n                    <i\n                      class=\"\n                        bi bi-exclamation-diamond\n                        fs-static-14\n                        text-secondary\n                      \"\n                    ></i>\n                    請輸入售價\n                  </label>\n                </div>\n              </div>\n            </div>\n            <!-- 產品描述、說明內容 -->\n            <div class=\"d-flex\">\n              <button\n                class=\"btn btn-outline-primary col me-1\"\n                type=\"button\"\n                data-bs-toggle=\"collapse\"\n                data-bs-target=\"#collapseDescription\"\n                :aria-expanded=\"descriptionCollapse\"\n                @click=\"descriptionCollapse = !descriptionCollapse\"\n              >\n                產品描述\n              </button>\n              <button\n                class=\"btn btn-outline-primary col ms-1\"\n                type=\"button\"\n                data-bs-toggle=\"collapse\"\n                data-bs-target=\"#collapseContent\"\n                :aria-expanded=\"contentCollapse\"\n                @click=\"contentCollapse = !contentCollapse\"\n              >\n                說明內容\n              </button>\n            </div>\n            <div v-if=\"descriptionCollapse\" id=\"collapseDescription\">\n              <div class=\"form-floating mt-3\">\n                <textarea\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"description\"\n                  v-model=\"tempProduct.description\"\n                ></textarea>\n                <label for=\"description\">請輸入產品描述</label>\n              </div>\n            </div>\n            <div v-if=\"contentCollapse\" id=\"collapseContent\">\n              <div class=\"form-floating mt-3\">\n                <textarea\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"content\"\n                  v-model=\"tempProduct.content\"\n                ></textarea>\n                <label for=\"content\">請輸入說明內容</label>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer flex-nowrap justify-content-around bg-light\">\n          <input\n            type=\"file\"\n            class=\"form-control w-75 text-primary\"\n            id=\"inputFile\"\n            ref=\"fileInput\"\n            @change=\"uploadFile\"\n          />\n          <!-- 透過 emit 傳遞資料 -->\n          <button\n            type=\"button\"\n            class=\"btn btn-primary btn-sm\"\n            @click=\"$emit('update-product', tempProduct)\"\n          >\n            儲存\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  props: {\n    // 取得外層 Products.vue 的單一產品\n    innerProduct: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  // 監聽外層 Products.vue 的變數 tempProduct 是否有更動\n  watch: {\n    innerProduct() {\n      this.tempProduct = this.innerProduct;\n    },\n  },\n  data() {\n    return {\n      modal: {},\n      // 單向數據流，儲存修改外層 Products.vue 的數據\n      tempProduct: {},\n      category: [\n        '一人獨享',\n        '兩人專屬',\n        '多人共享',\n        '歡慶開幕',\n        '當季限定',\n        '最新上架',\n        '加購專區',\n      ],\n      unit: ['份', '杯', '壺'],\n      // 預覽圖片\n      imageUrl: '',\n      descriptionCollapse: false,\n      contentCollapse: false,\n    };\n  },\n  methods: {\n    // 上傳圖片\n    uploadFile() {\n      const file = this.$refs.fileInput.files[0];\n      const beforeId = this.$refs.fileInput.id;\n\n      // 預覽圖片\n      const reader = new FileReader();\n      reader.addEventListener('load', this.imageLoaded);\n      reader.readAsDataURL(file);\n\n      // 建立 formData 格式\n      const formData = new FormData();\n      // 新增 Form 表單的欄位，對照 input name\n      formData.append('file-to-upload', file);\n\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/upload`;\n      this.$http.post(api, formData).then((res) => {\n        if (res.data.success) {\n          this.tempProduct.imageUrl = res.data.imageUrl;\n          // 清空欄位\n          document.getElementById(beforeId).value = '';\n          this.imageUrl = '';\n        }\n      });\n    },\n    // 預覽圖片\n    imageLoaded(e) {\n      this.imageUrl = e.target.result;\n    },\n  },\n  mixins: [modalMixin],\n};\n</script>\n","import { render } from \"./ProductModal.vue?vue&type=template&id=29cf4d9c\"\nimport script from \"./ProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./ProductModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/daisord/Desktop/vuecli-project-re2/Midnight-Diner_202202/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Products.vue?vue&type=template&id=333d6efa\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/daisord/Desktop/vuecli-project-re2/Midnight-Diner_202202/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar toString = require('../internals/to-string');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\nvar SymbolPrototype = NativeSymbol && NativeSymbol.prototype;\n\nif (DESCRIPTORS && isCallable(NativeSymbol) && (!('description' in SymbolPrototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : toString(arguments[0]);\n    var result = isPrototypeOf(SymbolPrototype, this)\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  SymbolWrapper.prototype = SymbolPrototype;\n  SymbolPrototype.constructor = SymbolWrapper;\n\n  var NATIVE_SYMBOL = String(NativeSymbol('test')) == 'Symbol(test)';\n  var symbolToString = uncurryThis(SymbolPrototype.toString);\n  var symbolValueOf = uncurryThis(SymbolPrototype.valueOf);\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  var replace = uncurryThis(''.replace);\n  var stringSlice = uncurryThis(''.slice);\n\n  defineProperty(SymbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = symbolValueOf(this);\n      var string = symbolToString(symbol);\n      if (hasOwn(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = NATIVE_SYMBOL ? stringSlice(string, 7, -1) : replace(string, regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n"],"sourceRoot":""}