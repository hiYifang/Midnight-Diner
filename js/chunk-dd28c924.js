(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd28c924"],{b0c0:function(e,t,c){var a=c("83ab"),r=c("5e77").EXISTS,l=c("e330"),n=c("9bf2").f,o=Function.prototype,d=l(o.toString),i=/^\s*function ([^ (]*)/,s=l(i.exec),b="name";a&&!r&&n(o,b,{configurable:!0,get:function(){try{return s(i,d(this))[1]}catch(e){return""}}})},efd9:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),r={class:"container"},l={class:"table-responsive my-4"},n={class:"table table-borderless table-hover",style:{"border-collapse":"separate","border-spacing":"0 0.5rem"}},o=Object(a["createElementVNode"])("thead",{class:"text-nowrap"},[Object(a["createElementVNode"])("tr",{class:"align-middle text-secondary"},[Object(a["createElementVNode"])("th",null,"訂單編號"),Object(a["createElementVNode"])("th",null,"購買時間"),Object(a["createElementVNode"])("th",null,"Email"),Object(a["createElementVNode"])("th",null,"金額"),Object(a["createElementVNode"])("th",null,"付款狀態"),Object(a["createElementVNode"])("th",null,"編輯")])],-1),d={class:"text-nowrap"},i={class:"rounded-start"},s=["textContent"],b={key:0,class:"bi bi-check-lg text-primary"},m={key:1,class:"bi bi-x-lg text-danger"},p={class:"rounded-end"},O={class:"btn-group"},u=["onClick"],j=Object(a["createElementVNode"])("i",{class:"bi bi-file-ruled"},null,-1),E=[j],h=["onClick"],N=Object(a["createElementVNode"])("i",{class:"bi bi-trash"},null,-1),V=[N];function g(e,t,c,j,N,g){var f=Object(a["resolveComponent"])("Loading"),y=Object(a["resolveComponent"])("Pagination"),k=Object(a["resolveComponent"])("OrderModal"),v=Object(a["resolveComponent"])("DelModal");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(f,{active:N.isLoading},null,8,["active"]),Object(a["createElementVNode"])("div",r,[Object(a["createVNode"])(y,{class:"mt-3",pages:N.pagination,onEmitPages:g.getOrders},null,8,["pages","onEmitPages"]),Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("table",n,[o,Object(a["createElementVNode"])("tbody",d,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(N.orders,(function(t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{class:Object(a["normalizeClass"])(["align-middle bg-light shadow-sm",{"text-secondary":!t.is_paid}]),key:t.id},[Object(a["createElementVNode"])("td",i,Object(a["toDisplayString"])(t.id),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(a["createElementVNode"])("td",null,[t.user?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",{key:0,textContent:Object(a["toDisplayString"])(t.user.email)},null,8,s)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.currency(t.total)),1),Object(a["createElementVNode"])("td",null,[t.is_paid?(Object(a["openBlock"])(),Object(a["createElementBlock"])("i",b)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("i",m))]),Object(a["createElementVNode"])("td",p,[Object(a["createElementVNode"])("div",O,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(e){return g.openModal(!1,t)}},E,8,u),Object(a["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(e){return g.openDelModal(t)}},V,8,h)])])],2)})),128))])])])]),Object(a["createVNode"])(k,{ref:"orderModal",innerOrder:N.tempOrder,onUpdateOrder:g.updateOrder},null,8,["innerOrder","onUpdateOrder"]),Object(a["createVNode"])(v,{ref:"delModal",innerItem:N.tempOrder,onDelItem:g.delOrder},null,8,["innerItem","onDelItem"])],64)}var f=c("5530"),y=(c("99af"),c("b0c0"),{class:"modal fade",id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"orderModalLabel","aria-hidden":"true",ref:"modal"}),k={class:"modal-dialog modal-dialog-centered"},v={class:"modal-content text-primary border-0"},x={class:"p-3"},C=Object(a["createElementVNode"])("div",{class:"d-flex justify-content-end"},[Object(a["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),B={class:"modal-header flex-column align-items-stretch"},D={class:"modal-title fw-bold",id:"couponModalLabel"},M={class:"text-secondary mb-0"},S=Object(a["createElementVNode"])("i",{class:"bi bi-calendar-check-fill"},null,-1),w={class:"text-secondary"},$=Object(a["createElementVNode"])("i",{class:"bi bi-cash-coin"},null,-1),_={class:"mb-0"},P=Object(a["createElementVNode"])("i",{class:"bi bi-credit-card-2-back mx-1"},null,-1),L={key:0},z={key:1},I={class:"switch-field mb-0"},U=["id"],F=["for"],T={class:"modal-body"},J={class:"d-flex"},q=["aria-expanded"],X=["aria-expanded"],A={key:0,id:"collapseUser"},G={class:"table mt-3"},H={key:0},K=Object(a["createElementVNode"])("th",{style:{width:"100px"}},"姓名",-1),Q=Object(a["createElementVNode"])("th",null,"Email",-1),R=Object(a["createElementVNode"])("th",null,"電話",-1),W=Object(a["createElementVNode"])("th",null,"地址",-1),Y={key:1,id:"collapseProduct"},Z={class:"table mt-3"},ee=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr")],-1),te={class:"text-end"},ce={class:"modal-footer bg-light"};function ae(e,t,c,r,l,n){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",y,[Object(a["createElementVNode"])("div",k,[Object(a["createElementVNode"])("div",v,[Object(a["createElementVNode"])("div",x,[C,Object(a["createElementVNode"])("div",B,[Object(a["createElementVNode"])("h5",D,Object(a["toDisplayString"])(l.tempOrder.id),1),Object(a["createElementVNode"])("p",M,[S,Object(a["createTextVNode"])(" 下單時間："+Object(a["toDisplayString"])(e.$filters.date(l.tempOrder.create_at)),1)]),Object(a["createElementVNode"])("p",w,[$,Object(a["createTextVNode"])(" 付款金額："+Object(a["toDisplayString"])(e.$filters.currency(l.tempOrder.total)),1)]),Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["alert d-flex justify-content-between text-primary",l.tempOrder.is_paid?"alert-secondary":"alert-danger"])},[Object(a["createElementVNode"])("p",_,[P,l.tempOrder.paid_date?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",L,"付款時間："+Object(a["toDisplayString"])(e.$filters.date(l.tempOrder.paid_date)),1)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",z,"付款時間不正確 "+Object(a["toDisplayString"])(l.tempOrder.paid_date),1))]),Object(a["createElementVNode"])("p",I,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"switch",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(e){return l.tempOrder.is_paid=e}),id:"paidSwitch".concat(l.tempOrder.id)},null,8,U),[[a["vModelCheckbox"],l.tempOrder.is_paid]]),Object(a["createElementVNode"])("label",{for:"paidSwitch".concat(l.tempOrder.id)},null,8,F)])],2)]),Object(a["createElementVNode"])("div",T,[Object(a["createElementVNode"])("div",J,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-primary col me-1",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseUser","aria-expanded":l.userCollapse,onClick:t[1]||(t[1]=function(e){return l.userCollapse=!l.userCollapse})}," 用戶資料 ",8,q),Object(a["createElementVNode"])("button",{class:"btn btn-outline-primary col ms-1",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseProduct","aria-expanded":l.productCollapse,onClick:t[2]||(t[2]=function(e){return l.productCollapse=!l.productCollapse})}," 選購商品 ",8,X)]),l.userCollapse?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",A,[Object(a["createElementVNode"])("table",G,[l.tempOrder.user?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tbody",H,[Object(a["createElementVNode"])("tr",null,[K,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(l.tempOrder.user.name),1)]),Object(a["createElementVNode"])("tr",null,[Q,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(l.tempOrder.user.email),1)]),Object(a["createElementVNode"])("tr",null,[R,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(l.tempOrder.user.tel),1)]),Object(a["createElementVNode"])("tr",null,[W,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(l.tempOrder.user.address),1)])])):Object(a["createCommentVNode"])("",!0)])])):Object(a["createCommentVNode"])("",!0),l.productCollapse?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Y,[Object(a["createElementVNode"])("table",Z,[ee,Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(l.tempOrder.products,(function(t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t.id},[Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(t.product.title),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.qty)+" / "+Object(a["toDisplayString"])(t.product.unit),1),Object(a["createElementVNode"])("td",te,Object(a["toDisplayString"])(e.$filters.currency(t.final_total)),1)])})),128))])])])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("div",ce,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-primary btn-sm",onClick:t[3]||(t[3]=function(t){return e.$emit("update-order",l.tempOrder)})}," 儲存 ")])])])],512)}var re=c("e0ae"),le={props:{innerOrder:{type:Object,default:function(){return{}}}},watch:{innerOrder:function(){this.tempOrder=this.innerOrder,this.isPaid=this.tempOrder.is_paid}},data:function(){return{modal:{},tempOrder:{},status:{},isPaid:!1,userCollapse:!1,productCollapse:!1}},emits:["update-order"],mixins:[re["a"]]},ne=c("6b0d"),oe=c.n(ne);const de=oe()(le,[["render",ae]]);var ie=de,se=c("ebbb"),be=c("1799"),me={components:{OrderModal:ie,DelModal:se["a"],Pagination:be["a"]},data:function(){return{orders:{},pagination:{},currentPage:1,tempOrder:{},isNew:!1,isLoading:!1}},inject:["emitter"],methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=t;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ezshop-api","/admin/orders?page=").concat(t);this.isLoading=!0,this.$http.get(c).then((function(t){e.isLoading=!1,t.data.success&&(e.orders=t.data.orders,e.pagination=t.data.pagination)}))},openModal:function(e,t){this.tempOrder=Object(f["a"])({},t),this.isNew=!1,this.$refs.orderModal.showModal()},updateOrder:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ezshop-api","/admin/order/").concat(e.id),a={is_paid:e.is_paid};this.$http.put(c,{data:a}).then((function(e){t.$refs.orderModal.hideModal(),t.getOrders(t.currentPage),t.$httpMessageState(e,"更新訂單")}))},openDelModal:function(e){this.tempOrder=Object(f["a"])({},e),this.$refs.delModal.showModal()},delOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ezshop-api","/admin/order/").concat(this.tempOrder.id);this.$http.delete(t).then((function(t){e.$refs.delModal.hideModal(),e.getOrders(e.currentPage),e.$httpMessageState(t,"刪除訂單")}))}},created:function(){this.getOrders()}};const pe=oe()(me,[["render",g]]);t["default"]=pe}}]);
//# sourceMappingURL=chunk-dd28c924.js.map